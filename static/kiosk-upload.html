<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CastAI - ì‚¬ì§„ ì—…ë¡œë“œ</title>
    <link rel="stylesheet" href="/static/kiosk.css">
</head>
<body class="kiosk-body">
    <div class="kiosk-container">
        <header class="kiosk-header">
            <h1>CastAI</h1>
            <p>AI ìºë¦­í„° ë³€í™˜ ì„œë¹„ìŠ¤</p>
        </header>

        <div class="kiosk-card" style="max-width: 700px; margin: 0 auto;">
            <h2>ì¸ë¬¼ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</h2>
            
            <div class="upload-zone" id="uploadZone">
                <input type="file" id="imageInput" accept="image/*" hidden>
                <div class="upload-content" id="uploadContent">
                    <div class="upload-icon">ğŸ“·</div>
                    <p>í´ë¦­í•˜ê±°ë‚˜ ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                    <p class="hint">JPG, PNG íŒŒì¼ (ìµœëŒ€ 10MB)</p>
                </div>
                <img id="previewImage" class="hidden" alt="Preview">
            </div>
        </div>

        <div class="kiosk-footer" style="max-width: 700px; margin: 0 auto;">
            <div></div>
            <button class="kiosk-btn primary" id="nextBtn" disabled>
                ë‹¤ìŒ ë‹¨ê³„ë¡œ
            </button>
        </div>
    </div>

    <script>
        const uploadZone = document.getElementById('uploadZone');
        const imageInput = document.getElementById('imageInput');
        const uploadContent = document.getElementById('uploadContent');
        const previewImage = document.getElementById('previewImage');
        const nextBtn = document.getElementById('nextBtn');

        let uploadedImageData = null;

        uploadZone.addEventListener('click', () => imageInput.click());

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '#7c3aed';
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.style.borderColor = '';
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '';
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleFile(file);
            }
        });

        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        });

        function handleFile(file) {
            if (file.size > 10 * 1024 * 1024) {
                alert('íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                uploadedImageData = e.target.result;
                previewImage.src = uploadedImageData;
                previewImage.classList.remove('hidden');
                uploadContent.classList.add('hidden');
                uploadZone.classList.add('has-image');
                nextBtn.disabled = false;
            };
            reader.readAsDataURL(file);
        }

        nextBtn.addEventListener('click', () => {
            if (uploadedImageData) {
                sessionStorage.setItem('uploadedImage', uploadedImageData);
                window.location.href = '/static/kiosk-style.html';
            }
        });
    </script>
</body>
</html>
